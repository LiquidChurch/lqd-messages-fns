define(["../core","../var/document"],function(e,a){var g=[],f=false,b=function(h){g.push(h)},c=function(h){window.setTimeout(function(){h.call(a,e)})};e.fn.ready=function(h){b(h);return this};e.extend({isReady:false,readyWait:1,holdReady:function(h){if(h){e.readyWait++}else{e.ready(true)}},ready:function(h){if(h===true?--e.readyWait:e.isReady){return}e.isReady=true;if(h!==true&&--e.readyWait>0){return}b=function(i){g.push(i);if(!f){f=true;while(g.length){i=g.shift();if(e.isFunction(i)){c(i)}}f=false}};b()}});e.ready.then=e.fn.ready;function d(){a.removeEventListener("DOMContentLoaded",d);window.removeEventListener("load",d);e.ready()}if(a.readyState==="complete"||(a.readyState!=="loading"&&!a.documentElement.doScroll)){window.setTimeout(e.ready)}else{a.addEventListener("DOMContentLoaded",d);window.addEventListener("load",d)}});