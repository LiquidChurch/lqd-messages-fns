define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(f,c,b,g){var d=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,a=/[A-Z]/g;function e(j,i,k){var h;if(k===undefined&&j.nodeType===1){h="data-"+i.replace(a,"-$&").toLowerCase();k=j.getAttribute(h);if(typeof k==="string"){try{k=k==="true"?true:k==="false"?false:k==="null"?null:+k+""===k?+k:d.test(k)?JSON.parse(k):k}catch(l){}g.set(j,i,k)}else{k=undefined}}return k}f.extend({hasData:function(h){return g.hasData(h)||b.hasData(h)},data:function(i,h,j){return g.access(i,h,j)},removeData:function(i,h){g.remove(i,h)},_data:function(i,h,j){return b.access(i,h,j)},_removeData:function(i,h){b.remove(i,h)}});f.fn.extend({data:function(l,o){var k,j,n,m=this[0],h=m&&m.attributes;if(l===undefined){if(this.length){n=g.get(m);if(m.nodeType===1&&!b.get(m,"hasDataAttrs")){k=h.length;while(k--){if(h[k]){j=h[k].name;if(j.indexOf("data-")===0){j=f.camelCase(j.slice(5));e(m,j,n[j])}}}b.set(m,"hasDataAttrs",true)}}return n}if(typeof l==="object"){return this.each(function(){g.set(this,l)})}return c(this,function(p){var i;if(m&&p===undefined){i=g.get(m,l);if(i!==undefined){return i}i=e(m,l);if(i!==undefined){return i}return}this.each(function(){g.set(this,l,p)})},null,o,arguments.length>1,null,true)},removeData:function(h){return this.each(function(){g.remove(this,h)})}});return f});