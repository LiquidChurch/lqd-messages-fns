define(["./core","./var/document","./var/documentElement","./var/rnotwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(l,f,h,i,g,m){var k=/^key/,c=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,b=/^([^.]*)(?:\.(.+)|)/;function d(){return true}function a(){return false}function j(){try{return f.activeElement}catch(n){}}function e(s,p,n,t,r,o){var u,q;if(typeof p==="object"){if(typeof n!=="string"){t=t||n;n=undefined}for(q in p){e(s,q,n,t,p[q],o)}return s}if(t==null&&r==null){r=n;t=n=undefined}else{if(r==null){if(typeof n==="string"){r=t;t=undefined}else{r=t;t=n;n=undefined}}}if(r===false){r=a}else{if(!r){return s}}if(o===1){u=r;r=function(v){l().off(v);return u.apply(this,arguments)};r.guid=u.guid||(u.guid=l.guid++)}return s.each(function(){l.event.add(this,p,r,t,n)})}l.event={global:{},add:function(r,x,E,u,s){var p,w,v,D,C,B,z,q,A,n,o,y=m.get(r);if(!y){return}if(E.handler){p=E;E=p.handler;s=p.selector}if(s){l.find.matchesSelector(h,s)}if(!E.guid){E.guid=l.guid++}if(!(D=y.events)){D=y.events={}}if(!(w=y.handle)){w=y.handle=function(t){return typeof l!=="undefined"&&l.event.triggered!==t.type?l.event.dispatch.apply(r,arguments):undefined}}x=(x||"").match(i)||[""];C=x.length;while(C--){v=b.exec(x[C])||[];A=o=v[1];n=(v[2]||"").split(".").sort();if(!A){continue}z=l.event.special[A]||{};A=(s?z.delegateType:z.bindType)||A;z=l.event.special[A]||{};B=l.extend({type:A,origType:o,data:u,handler:E,guid:E.guid,selector:s,needsContext:s&&l.expr.match.needsContext.test(s),namespace:n.join(".")},p);if(!(q=D[A])){q=D[A]=[];q.delegateCount=0;if(!z.setup||z.setup.call(r,u,n,w)===false){if(r.addEventListener){r.addEventListener(A,w)}}}if(z.add){z.add.call(r,B);if(!B.handler.guid){B.handler.guid=E.guid}}if(s){q.splice(q.delegateCount++,0,B)}else{q.push(B)}l.event.global[A]=true}},remove:function(q,x,E,r,w){var u,s,v,D,C,B,z,p,A,n,o,y=m.hasData(q)&&m.get(q);if(!y||!(D=y.events)){return}x=(x||"").match(i)||[""];C=x.length;while(C--){v=b.exec(x[C])||[];A=o=v[1];n=(v[2]||"").split(".").sort();if(!A){for(A in D){l.event.remove(q,A+x[C],E,r,true)}continue}z=l.event.special[A]||{};A=(r?z.delegateType:z.bindType)||A;p=D[A]||[];v=v[2]&&new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)");s=u=p.length;while(u--){B=p[u];if((w||o===B.origType)&&(!E||E.guid===B.guid)&&(!v||v.test(B.namespace))&&(!r||r===B.selector||r==="**"&&B.selector)){p.splice(u,1);if(B.selector){p.delegateCount--}if(z.remove){z.remove.call(q,B)}}}if(s&&!p.length){if(!z.teardown||z.teardown.call(q,n,y.handle)===false){l.removeEvent(q,A,y.handle)}delete D[A]}}if(l.isEmptyObject(D)){m.remove(q,"handle events")}},dispatch:function(p){var n=l.event.fix(p);var s,r,t,o,x,w,v=new Array(arguments.length),q=(m.get(this,"events")||{})[n.type]||[],u=l.event.special[n.type]||{};v[0]=n;for(s=1;s<arguments.length;s++){v[s]=arguments[s]}n.delegateTarget=this;if(u.preDispatch&&u.preDispatch.call(this,n)===false){return}w=l.event.handlers.call(this,n,q);s=0;while((o=w[s++])&&!n.isPropagationStopped()){n.currentTarget=o.elem;r=0;while((x=o.handlers[r++])&&!n.isImmediatePropagationStopped()){if(!n.rnamespace||n.rnamespace.test(x.namespace)){n.handleObj=x;n.data=x.data;t=((l.event.special[x.origType]||{}).handle||x.handler).apply(o.elem,v);if(t!==undefined){if((n.result=t)===false){n.preventDefault();n.stopPropagation()}}}}}if(u.postDispatch){u.postDispatch.call(this,n)}return n.result},handlers:function(n,p){var r,s,o,u,t=[],q=p.delegateCount,v=n.target;if(q&&v.nodeType&&(n.type!=="click"||isNaN(n.button)||n.button<1)){for(;v!==this;v=v.parentNode||this){if(v.nodeType===1&&(v.disabled!==true||n.type!=="click")){s=[];for(r=0;r<q;r++){u=p[r];o=u.selector+" ";if(s[o]===undefined){s[o]=u.needsContext?l(o,this).index(v)>-1:l.find(o,this,null,[v]).length}if(s[o]){s.push(u)}}if(s.length){t.push({elem:v,handlers:s})}}}}if(q<p.length){t.push({elem:this,handlers:p.slice(q)})}return t},addProp:function(n,o){Object.defineProperty(l.Event.prototype,n,{enumerable:true,configurable:true,get:l.isFunction(o)?function(){if(this.originalEvent){return o(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[n]}},set:function(p){Object.defineProperty(this,n,{enumerable:true,configurable:true,writable:true,value:p})}})},fix:function(n){return n[l.expando]?n:new l.Event(n)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==j()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===j()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&l.nodeName(this,"input")){this.click();return false}},_default:function(n){return l.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){if(n.result!==undefined&&n.originalEvent){n.originalEvent.returnValue=n.result}}}}};l.removeEvent=function(o,n,p){if(o.removeEventListener){o.removeEventListener(n,p)}};l.Event=function(o,n){if(!(this instanceof l.Event)){return new l.Event(o,n)}if(o&&o.type){this.originalEvent=o;this.type=o.type;this.isDefaultPrevented=o.defaultPrevented||o.defaultPrevented===undefined&&o.returnValue===false?d:a;this.target=(o.target&&o.target.nodeType===3)?o.target.parentNode:o.target;this.currentTarget=o.currentTarget;this.relatedTarget=o.relatedTarget}else{this.type=o}if(n){l.extend(this,n)}this.timeStamp=o&&o.timeStamp||l.now();this[l.expando]=true};l.Event.prototype={constructor:l.Event,isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,isSimulated:false,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=d;if(n&&!this.isSimulated){n.preventDefault()}},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=d;if(n&&!this.isSimulated){n.stopPropagation()}},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=d;if(n&&!this.isSimulated){n.stopImmediatePropagation()}this.stopPropagation()}};l.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,"char":true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(o){var n=o.button;if(o.which==null&&k.test(o.type)){return o.charCode!=null?o.charCode:o.keyCode}if(!o.which&&n!==undefined&&c.test(o.type)){return(n&1?1:(n&2?3:(n&4?2:0)))}return o.which}},l.event.addProp);l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(o,n){l.event.special[o]={delegateType:n,bindType:n,handle:function(r){var p,t=this,s=r.relatedTarget,q=r.handleObj;if(!s||(s!==t&&!l.contains(t,s))){r.type=q.origType;p=q.handler.apply(this,arguments);r.type=n}return p}}});l.fn.extend({on:function(o,n,q,p){return e(this,o,n,q,p)},one:function(o,n,q,p){return e(this,o,n,q,p,1)},off:function(p,n,r){var o,q;if(p&&p.preventDefault&&p.handleObj){o=p.handleObj;l(p.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler);return this}if(typeof p==="object"){for(q in p){this.off(q,n,p[q])}return this}if(n===false||typeof n==="function"){r=n;n=undefined}if(r===false){r=a}return this.each(function(){l.event.remove(this,p,r,n)})}});return l});